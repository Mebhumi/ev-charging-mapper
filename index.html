<!DOCTYPE html><html lang="th"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>EV Charging Stations Thailand</title><link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',sans-serif}#map{height:100vh}#sidebar{position:fixed;top:0;left:0;width:350px;height:100vh;background:#fff;z-index:999;overflow-y:auto;box-shadow:2px 0 8px rgba(0,0,0,.1);padding:20px}#sidebar h2{color:#1a73e8;margin-bottom:15px}#stats{background:#f0f4f8;padding:15px;border-radius:8px;margin-bottom:20px;font-size:14px}#stats p{margin:8px 0}.marker{color:#fff;font-weight:bold;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center}</style></head><body><div id="sidebar"><h2>⚡ EV Charging Stations</h2><div id="stats"><p>Loading...</p></div><div id="legend"></div></div><div id="map"></div><script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script><script>const kmlFile='https://github.com/Mebhumi/ev-charging-mapper/raw/main/DC%20EV%20Charging%20Station%20Thailand%20-%20Piyamate%20Wisanuvej.kml';const operatorColors={PTT:'#FF6B35',PEA:'#4ECDC4',ReverCharger:'#F38181',EleX:'#95E1D3',Altervim:'#AA96DA',Shell:'#FFB84D'};let map,allStations=[];function initMap(){map=L.map('map').setView([13.7262,100.5392],6);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);loadKML()}function loadKML(){fetch(kmlFile).then(r=>r.text()).then(kmlText=>{parseKML(kmlText);renderStations();updateStats()}).catch(e=>{console.error('Error loading KML:',e);document.getElementById('stats').innerHTML='<p>Error loading data</p>'})}function parseKML(kmlText){const parser=new DOMParser();const kml=parser.parseFromString(kmlText,'application/xml');const placemarks=kml.querySelectorAll('Placemark');placemarks.forEach(pm=>{const name=pm.querySelector('name')?.textContent||'Unknown';const point=pm.querySelector('Point');if(!point)return;const coords=point.querySelector('coordinates')?.textContent.trim().split(',');if(!coords||coords.length<2)return;const lng=parseFloat(coords[0]),lat=parseFloat(coords[1]);let operator='Unknown';const description=pm.querySelector('description')?.textContent||'';if(name.includes('PTT')||description.includes('PTT'))operator='PTT';else if(name.includes('PEA')||description.includes('PEA'))operator='PEA';else if(name.includes('ReverCharger')||description.includes('ReverCharger'))operator='ReverCharger';else if(name.includes('EleX')||description.includes('EleX'))operator='EleX';else if(name.includes('Altervim')||description.includes('Altervim'))operator='Altervim';else if(name.includes('Shell')||description.includes('Shell'))operator='Shell';allStations.push({name,operator,lat,lng})})}function renderStations(){map.eachLayer(l=>{if(l instanceof L.Marker)map.removeLayer(l)});allStations.forEach(s=>{const color=operatorColors[s.operator]||'#999';L.circleMarker([s.lat,s.lng],{radius:8,fillColor:color,color:'#fff',weight:2,fillOpacity:.8}).addTo(map).bindPopup(`<b>${s.name}</b><br>Operator: ${s.operator}`)})}function updateStats(){const grouped={};allStations.forEach(s=>{grouped[s.operator]=(grouped[s.operator]||0)+1});let html=`<p><strong>Total Stations:</strong> ${allStations.length}</p>`;Object.entries(grouped).forEach(([op,count])=>{const color=operatorColors[op]||'#999';html+=`<p><span style="color:${color}">●</span> ${op}: ${count}</p>`});document.getElementById('stats').innerHTML=html}initMap()</script></body></html>
